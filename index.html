<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorai's Beautify</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'VT323', monospace;
            background-color: #fff5f8;
            color: #d63384;
            touch-action: manipulation;
        }
        .pixel-border {
            box-shadow: 
                0 -4px 0 0 #ff85c1,
                0 4px 0 0 #ff85c1,
                -4px 0 0 0 #ff85c1,
                4px 0 0 0 #ff85c1;
        }
        .canvas-container {
            position: relative;
            width: 320px;
            height: 460px;
            background: #ffffff;
            image-rendering: pixelated;
        }
        .layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .category-tab {
            cursor: pointer;
            background: #ffc2df;
            color: #fff;
            text-align: center;
            padding: 14px 4px;
            border: 2px solid #ff85c1;
            font-size: 1.2rem;
            transition: 0.2s;
        }
        .category-tab.active {
            background: #ff85c1;
            border-bottom-color: transparent;
        }
        .item-grid::-webkit-scrollbar { width: 6px; }
        .item-grid::-webkit-scrollbar-thumb { background: #ff85c1; border-radius: 10px; }
        
        .item-card {
            background: #fff;
            border: 2px solid #ffdeeb;
            transition: 0.2s;
            cursor: pointer;
        }
        .item-card:hover {
            border-color: #ff85c1;
            background: #fff9fc;
            transform: translateY(-2px);
        }
        .btn-action {
            background-color: #ff85c1;
            color: white;
            transition: all 0.2s;
        }
        .btn-action:hover {
            background-color: #f767ab;
            transform: scale(1.05);
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <div class="text-center mb-8">
        <h1 class="text-6xl text-pink-500 drop-shadow-md tracking-tighter">SORAI'S BEAUTIFY</h1>
    </div>

    <div class="flex flex-col lg:flex-row gap-6 bg-white p-8 rounded-[40px] pixel-border max-w-5xl w-full">
        
        <!-- Character Display -->
        <div class="flex-none flex flex-col items-center">
            <div id="capture-area" class="canvas-container rounded-2xl overflow-hidden border-2 border-pink-50">
                <!-- Background Decoration -->
                <div id="layer-bg" class="layer flex items-end justify-center pb-16 opacity-10 text-9xl">âœ¨</div>
                
                <!-- HD Human Base -->
                <svg id="layer-base" class="layer" viewBox="0 0 64 92" xmlns="http://www.w3.org/2000/svg">
                    <!-- Legs -->
                    <rect x="27" y="68" width="4" height="18" fill="#ffeae0" />
                    <rect x="33" y="68" width="4" height="18" fill="#ffeae0" />
                    <!-- Body Torso -->
                    <rect x="25" y="40" width="14" height="28" fill="#ffeae0" />
                    <!-- Neck & Head -->
                    <rect x="30" y="36" width="4" height="4" fill="#ffeae0" />
                    <rect x="22" y="14" width="20" height="24" fill="#ffeae0" />
                    <!-- Face Details -->
                    <rect x="24" y="26" width="6" height="1" fill="#2d2d2d" />
                    <rect x="34" y="26" width="6" height="1" fill="#2d2d2d" />
                    <rect x="26" y="27" width="3" height="4" fill="#3d3d3d" />
                    <rect x="35" y="27" width="3" height="4" fill="#3d3d3d" />
                    <rect x="26" y="27" width="1" height="1" fill="#fff" />
                    <rect x="35" y="27" width="1" height="1" fill="#fff" />
                    <rect x="23" y="32" width="4" height="1" fill="#ffb3ba" opacity="0.7" />
                    <rect x="37" y="32" width="4" height="1" fill="#ffb3ba" opacity="0.7" />
                    <rect x="31" y="34" width="2" height="1" fill="#ff85c1" />
                </svg>

                <svg id="layer-hair" class="layer" viewBox="0 0 64 92"></svg>
                <svg id="layer-clothes" class="layer" viewBox="0 0 64 92"></svg>
                <svg id="layer-acc" class="layer" viewBox="0 0 64 92"></svg>
                <svg id="layer-shoes" class="layer" viewBox="0 0 64 92"></svg>
            </div>

            <div class="grid grid-cols-2 gap-4 mt-8 w-full">
                <button onclick="randomize()" class="btn-action py-3 rounded-xl text-2xl pixel-border">RANDOM</button>
                <button onclick="resetLayers()" class="bg-pink-50 hover:bg-pink-100 text-pink-400 py-3 rounded-xl text-2xl pixel-border">RESET</button>
            </div>
        </div>

        <!-- Customization Panel -->
        <div class="flex-1 flex flex-col h-[520px]">
            <div class="grid grid-cols-5 gap-1 mb-4">
                <div onclick="switchTab('hair')" id="tab-hair" class="category-tab active rounded-tl-2xl">Hair</div>
                <div onclick="switchTab('clothes')" id="tab-clothes" class="category-tab">Outfit</div>
                <div onclick="switchTab('acc')" id="tab-acc" class="category-tab">Accessory</div>
                <div onclick="switchTab('shoes')" id="tab-shoes" class="category-tab">Shoes</div>
                <div onclick="switchTab('bg')" id="tab-bg" class="category-tab rounded-tr-2xl">Theme</div>
            </div>

            <div class="item-grid bg-pink-50/30 border-2 border-pink-100 p-6 flex-1 overflow-y-auto grid grid-cols-3 md:grid-cols-4 gap-4 rounded-b-2xl">
                <!-- Items injected via JS -->
            </div>
        </div>
    </div>

    <script>
        const layers = {
            hair: document.getElementById('layer-hair'),
            clothes: document.getElementById('layer-clothes'),
            acc: document.getElementById('layer-acc'),
            shoes: document.getElementById('layer-shoes'),
            bg: document.getElementById('layer-bg'),
            canvas: document.getElementById('capture-area')
        };

        const assets = {
            hair: [
                { name: 'None', svg: '' },
                { name: 'Sleek Black', svg: '<path d="M21 13 H43 V48 H38 V20 H26 V48 H21 Z" fill="#1a1a1a"/><rect x="22" y="14" width="20" height="5" fill="#1a1a1a"/><rect x="23" y="15" width="2" height="1" fill="#fff" opacity="0.1"/>' },
                { name: 'Pink Hime', svg: '<path d="M20 12 H44 V55 H40 V18 H24 V55 H20 Z" fill="#ffb7c5"/><rect x="22" y="13" width="20" height="8" fill="#ffb7c5"/>' },
                { name: 'Ash Brown', svg: '<path d="M21 13 H43 V42 H39 V20 H25 V42 H21 Z" fill="#8d775f"/><rect x="22" y="14" width="20" height="7" fill="#8d775f"/>' },
                { name: 'Long Wavy', svg: '<path d="M19 14 Q32 8 45 14 V55 L40 50 L35 55 L30 50 L25 55 L20 50 Z" fill="#4a4a4a"/>' },
                { name: 'Pony Tail', svg: '<rect x="22" y="14" width="20" height="7" fill="#1a1a1a"/><path d="M42 18 Q50 18 48 45" stroke="#1a1a1a" fill="none" stroke-width="4"/>' }
            ],
            clothes: [
                { name: 'None', svg: '' },
                { name: 'Classy Blazer', svg: '<rect x="25" y="40" width="14" height="18" fill="#fff"/><path d="M25 40 L32 50 L39 40" fill="none" stroke="#ffdeeb" stroke-width="1"/><rect x="24" y="40" width="3" height="15" fill="#fff"/><rect x="37" y="40" width="3" height="15" fill="#fff"/>' },
                { name: 'Ribbon Dress', svg: '<rect x="24" y="40" width="16" height="28" fill="#ff85c1"/><rect x="29" y="42" width="6" height="4" fill="#fff"/><rect x="23" y="60" width="18" height="10" fill="#ff85c1"/>' },
                { name: 'Black Corset', svg: '<rect x="26" y="40" width="12" height="15" fill="#222"/><rect x="26" y="55" width="12" height="12" fill="#333" opacity="0.8"/>' },
                { name: 'Soft Knit', svg: '<rect x="24" y="40" width="16" height="20" fill="#fce4ec"/><rect x="20" y="42" width="5" height="12" fill="#fce4ec"/><rect x="39" y="42" width="5" height="12" fill="#fce4ec"/>' }
            ],
            acc: [
                { name: 'None', svg: '' },
                { name: 'Chic Glasses', svg: '<rect x="24" y="28" width="7" height="4" fill="none" stroke="#222" stroke-width="1"/><rect x="33" y="28" width="7" height="4" fill="none" stroke="#222" stroke-width="1"/><rect x="31" y="30" width="2" height="1" fill="#222"/>' },
                { name: 'Heart Clip', svg: '<rect x="38" y="18" width="3" height="3" fill="#ff85c1"/><rect x="39" y="19" width="1" height="1" fill="#fff"/>' },
                { name: 'Pearl Drop', svg: '<circle cx="21" cy="32" r="1.5" fill="#fff"/><circle cx="43" cy="32" r="1.5" fill="#fff"/>' },
                { name: 'Beret', svg: '<path d="M20 18 Q32 10 44 18 Z" fill="#ff85c1"/><rect x="31" y="12" width="2" height="3" fill="#ff85c1"/>' }
            ],
            shoes: [
                { name: 'None', svg: '' },
                { name: 'Platform Heels', svg: '<rect x="26" y="84" width="5" height="4" fill="#222"/><rect x="33" y="84" width="5" height="4" fill="#222"/><rect x="26" y="86" width="12" height="2" fill="#ff85c1" opacity="0.3"/>' },
                { name: 'Lace Socks', svg: '<rect x="27" y="78" width="4" height="6" fill="#fff"/><rect x="33" y="78" width="4" height="6" fill="#fff"/><rect x="27" y="78" width="4" height="2" fill="#ffdeeb"/>' },
                { name: 'Ankle Boots', svg: '<rect x="26" y="80" width="5" height="8" fill="#4a2c40"/><rect x="33" y="80" width="5" height="8" fill="#4a2c40"/>' }
            ],
            bg: [
                { name: 'Luxe', color: '#ffffff', emoji: 'âœ¨' },
                { name: 'Blush', color: '#fff0f6', emoji: 'ðŸŽ€' },
                { name: 'Lavender', color: '#f8f0ff', emoji: 'ðŸ’œ' },
                { name: 'Vanilla', color: '#fffaf0', emoji: 'ðŸ¦' }
            ]
        };

        let currentTab = 'hair';

        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.category-tab').forEach(el => el.classList.remove('active'));
            document.getElementById('tab-' + tab).classList.add('active');
            renderItems();
        }

        function renderItems() {
            const grid = document.querySelector('.item-grid');
            grid.innerHTML = '';
            
            assets[currentTab].forEach((item) => {
                const card = document.createElement('div');
                card.className = 'item-card rounded-2xl p-2 flex items-center justify-center h-28 shadow-sm';
                
                if (currentTab === 'bg') {
                    card.style.backgroundColor = item.color;
                    card.innerHTML = `<span class="text-4xl">${item.emoji}</span>`;
                } else {
                    card.innerHTML = `<svg viewBox="0 0 64 92" class="w-16 h-16">${item.svg}</svg>`;
                }

                card.onclick = () => applyItem(item);
                grid.appendChild(card);
            });
        }

        function applyItem(item) {
            if (currentTab === 'bg') {
                layers.canvas.style.backgroundColor = item.color;
                layers.bg.innerText = item.emoji;
            } else {
                layers[currentTab].innerHTML = item.svg;
            }
        }

        function randomize() {
            Object.keys(assets).forEach(type => {
                const items = assets[type];
                const randomItem = items[Math.floor(Math.random() * items.length)];
                if (type === 'bg') {
                    layers.canvas.style.backgroundColor = randomItem.color;
                    layers.bg.innerText = randomItem.emoji;
                } else {
                    layers[type].innerHTML = randomItem.svg;
                }
            });
        }

        function resetLayers() {
            Object.keys(layers).forEach(k => {
                if(k !== 'canvas' && k !== 'bg') layers[k].innerHTML = '';
            });
            layers.canvas.style.backgroundColor = '#ffffff';
            layers.bg.innerText = 'âœ¨';
        }

        window.onload = () => {
            renderItems();
        };
    </script>
</body>
</html>
